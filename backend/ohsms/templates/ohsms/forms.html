{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>OHSMS โ ุงูููุงุฐุฌ ุงูุฑูููุฉ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">
</head>
<body>
<header class="top-header">
  <h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ โ OHSMS</h1>
  <p>ุงูููุงุฐุฌ ุงูุฑูููุฉ โ ูููุฐุฌ ุงูุชูููู ุงูุนุงู ูุจูุฆุฉ ุงูุนูู ูุงููุฎุงุทุฑ</p>
</header>

<div class="main-wrapper">
    
  <aside class="sidebar">
<h3>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h3>

<a class="nav-link" href="{% url 'home' %}" data-perm="view_home">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
<a class="nav-link" href="{% url 'reports' %}" data-perm="view_reports">ูุธุงู ุงูุจูุงุบุงุช / ุณุฌู ุงููุชุงุจุนุฉ</a>
<a class="nav-link" href="{% url 'risk' %}" data-perm="view_risks">ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ</a>
<a class="nav-link" href="{% url 'forms' %}" data-perm="view_forms">ุงูููุงุฐุฌ ุงูุฑูููุฉ</a>
<a class="nav-link" href="{% url 'dashboard' %}" data-perm="view_dashboard">ููุญุฉ ุงูุชุญูู</a>
<a class="nav-link" href="{% url 'system' %}" data-perm="view_system">ุฅุฏุงุฑุฉ ุงููุธุงู</a>

<a class="nav-link" href="awareness.html" data-perm="view_awareness">ุงูุชูุนูุฉ ูุงูุชุซููู</a>
<a class="nav-link" href="vendors.html" data-perm="view_partners">ุงูุนููุงุก ูุงูุดุฑูุงุก</a>

</aside>
 




  <main class="content">

    <section class="card">
      <h2><span class="emoji">๐</span>ุฅุฏุงุฑุฉ ุงูููุงุฐุฌ ุงูุฑูููุฉ</h2>
      <p class="hint">ูููู ููุฏูุฑ ุงููุธุงู ูู ููุง ูุดุงุฑูุฉ ูููุฐุฌ ุงูุชูููู ุงูุนุงู ูุจูุฆุฉ ุงูุนูู ูุงููุฎุงุทุฑ ูุน ุงูุฅุฏุงุฑุงุช ุฃู ุงูุฃูุฑุงุฏุ ูุงุณุชูุจุงู ุงูููุงุฐุฌ ุงูููุชููุฉ.</p>
      <div class="grid-3">
        <div class="info-box info-policy">
          <strong>ุนุฏุฏ ุงูููุงุฐุฌ ุงููุชุงุญุฉ</strong>
          <p id="formsCount">1 ูููุฐุฌ</p>
        </div>
        <div class="info-box info-goals">
          <strong>ุงูููุงุฐุฌ ุงููุฑุณูุฉ</strong>
          <p id="sentCount">0 ูููุฉ</p>
        </div>
        <div class="info-box info-scope">
          <strong>ุงูููุงุฐุฌ ุงููุงุฑุฏุฉ</strong>
          <p id="receivedCount">0 ุฑุฏ</p>
        </div>
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐งพ</span>ูููุฐุฌ ุงูุชูููู ุงูุนุงู ูุจูุฆุฉ ุงูุนูู ูุงููุฎุงุทุฑ</h2>
      <p class="hint">ูุฐุง ุงููููุฐุฌ ูุญุชูู ุนูู ูุฌููุนุฉ ุฃุณุฆูุฉ ุงูุชุฑุงุถูุฉ ูููู ุชุนุฏูููุง ูุงุญููุงุ ูุชุนุชูุฏ ุนูู ุฎูุงุฑุงุช (ูุนู / ูุง / ูุง ููุทุจู) ูุน ููุงุญุธุงุช ููู ุณุคุงู.</p>

      <div class="grid-3">
        <div>
          <label>ุฅุฑุณุงู ุฅูู (ุงุฎุชูุงุฑู โ ูุต ููุท ุญุงููุง)</label>
          <input id="target" class="input" placeholder="ูุซุงู: ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ โ ุฌููุน ูุดุฑูู ุงููุฑูุน">
        </div>
        <div>
          <label>ูุตู ุงููููุฉ</label>
          <input id="taskNote" class="input" placeholder="ูุซุงู: ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุงููููุฐุฌ ูุจู ููุงูุฉ ุงูุฃุณุจูุน">
        </div>
        <div style="display:flex;align-items:flex-end;">
          <button id="createLinkBtn" class="btn btn-primary">๐ ุฅูุดุงุก ุฑุงุจุท ุชุนุจุฆุฉ</button>
        </div>
      </div>

      <p id="shareInfo" class="hint" style="margin-top:10px;"></p>
    </section>

    <section class="card" id="fillSection">
      <h2><span class="emoji">โ</span>ุชุนุจุฆุฉ ุงููููุฐุฌ ุงูุฑููู</h2>
      <p class="hint">ูููู ูุฃู ูุณุชุฎุฏู ููุชูู ุงูุฑุงุจุท ุชุนุจุฆุฉ ูุฐุง ุงููููุฐุฌ ุซู ุงูุถุบุท ุนูู ุฒุฑ "ุฅุฑุณุงู ุงููููุฐุฌ".</p>

      <div class="grid-3">
        <div>
          <label>ุงููุฑุณู</label>
          <input id="senderName" class="input" placeholder="ูุซุงู: ูุฏูุฑ ุงููุธุงู ุฃู ูุณุคูู ุงูุณูุงูุฉ">
        </div>
        <div>
          <label>ุงููุณุชูู</label>
          <input id="receiverName" class="input" placeholder="ูุซุงู: ูุดุฑู ุงูุณูุงูุฉ โ ูุณู ุงูุชุดุบูู">
        </div>
        <div>
          <label>ุงุณู ุงููุนุจูู / ุงููุณู</label>
          <input id="fillerName" class="input" placeholder="ุงูุชุจ ุงุณูู ููุง">
        </div>
      </div>

      <div id="questionsContainer" style="margin-top:14px;"></div>

      <div style="margin-top:14px;display:flex;justify-content:flex-end;gap:10px;align-items:center;">
        <button id="submitFormBtn" class="btn btn-primary">๐จ ุฅุฑุณุงู ุงููููุฐุฌ</button>
        <div id="formMsg" class="success-msg"></div>
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐ฅ</span>ุงูุฑุฏูุฏ ุงููุณุฌูุฉ</h2>
      <p class="hint">ููุถุญ ูุฐุง ุงูุฌุฏูู ุงูููุงุฐุฌ ุงูุชู ุชู ุชุนุจุฆุชูุง ูุฅุฑุณุงููุง ูู ุฎูุงู ูุฐุง ุงููููุฐุฌ.</p>
      <div class="table-wrapper">
        <table class="reports" id="responsesTable">
          <thead>
            <tr>
              <th>ุฑูู ุงููููุฐุฌ</th>
              <th>ุงูุชุงุฑูุฎ</th>
              <th>ุงููุฑุณู</th>
              <th>ุงููุณุชูู</th>
              <th>ุงููุนุจูู</th>
              <th>ุนุฏุฏ ุงูุฃุณุฆูุฉ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <p id="responsesEmpty" class="empty">ูุง ุชูุฌุฏ ุฑุฏูุฏ ูุณุฌูุฉ ุญุชู ุงูุขู.</p>
    </section>

  </main>
</div>

<!-- ูุงูุฐุฉ ููุงุญุธุงุช -->

<div id="notesModal" class="modal hidden">
  <div class="modal-box">
    <h3>๐ ููุงุญุธุงุช ุงูุณุคุงู</h3>
    <p class="modal-hint">ููููู ูุชุงุจุฉ ุฃู ุชูุงุตูู ุฅุถุงููุฉ ูุฑุชุจุทุฉ ุจูุฐุง ุงูุณุคุงู.</p>
    <textarea id="notesInput" class="textarea"></textarea>
    <div class="modal-actions">
      <button id="cancelNotesBtn" class="btn btn-secondary btn-small">ุฅูุบุงุก</button>
      <button id="saveNotesBtn" class="btn btn-primary btn-small">ุญูุธ ุงูููุงุญุธุงุช</button>
    </div>
  </div>
</div>

<script src="{% static 'assets/js/forms.js' %}"></script>
<script src="{% static 'assets/js/system.js' %}"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const user = ohsmsGetCurrentUser();

    // ุฅุฐุง ูุง ููู ูุณุชุฎุฏู
    if(!user){
        alert("ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู");
        location.href = "login.html";
        return;
    }

    // ุตูุงุญูุฉ ุงูููุงุฐุฌ ุงูุฑูููุฉ
    if(!ohsmsHasPermission("view_forms")){
        alert("ุบูุฑ ูุตุฑุญ ูู ุจุงูุฏุฎูู ุฅูู ุงูููุงุฐุฌ ุงูุฑูููุฉ");
        location.href = "index.html";
        return;
    }

});
</script>


</body>
</html>
