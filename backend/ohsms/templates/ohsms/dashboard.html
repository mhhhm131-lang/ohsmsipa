{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>OHSMS โ ููุญุฉ ุงูุชุญูู</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">
</head>
<body>
<header class="top-header">
  <h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ โ OHSMS</h1>
  <p>ููุญุฉ ุงูุชุญูู โ ูุคุดุฑุงุช ุงูุจูุงุบุงุช ูุงููุฎุงุทุฑ ูุงูููุงุฐุฌ ุงูุฑูููุฉ</p>
</header>

<div class="main-wrapper">
  
    <aside class="sidebar">
<h3>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h3>
<a class="nav-link" href="{% url 'home' %}" data-perm="view_home">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
<a class="nav-link" href="{% url 'reports' %}" data-perm="view_reports">ูุธุงู ุงูุจูุงุบุงุช / ุณุฌู ุงููุชุงุจุนุฉ</a>
<a class="nav-link" href="{% url 'risk' %}" data-perm="view_risks">ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ</a>
<a class="nav-link" href="{% url 'forms' %}" data-perm="view_forms">ุงูููุงุฐุฌ ุงูุฑูููุฉ</a>
<a class="nav-link" href="{% url 'dashboard' %}" data-perm="view_dashboard">ููุญุฉ ุงูุชุญูู</a>
<a class="nav-link" href="{% url 'system' %}" data-perm="view_system">ุฅุฏุงุฑุฉ ุงููุธุงู</a>

<a class="nav-link" href="awareness.html" data-perm="view_awareness">ุงูุชูุนูุฉ ูุงูุชุซููู</a>
<a class="nav-link" href="vendors.html" data-perm="view_partners">ุงูุนููุงุก ูุงูุดุฑูุงุก</a>

</aside>




  <main class="content">
    <section class="card">
      <h2><span class="emoji">๐๏ธ</span> ููุญุฉ ุงูุชุญูู ุงูุนุงูุฉ</h2>
      <p class="hint">ุชุนุฑุถ ูุฐู ุงูููุญุฉ ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ูุถุน ุงูุจูุงุบุงุช ูุงููุฎุงุทุฑ ูุงูููุงุฐุฌ ุงูุฑูููุฉุ ูุน ุฅููุงููุฉ ุงูุชุตููุฉ ุญุณุจ ุงููุฑุน ูุงูุฅุฏุงุฑุฉ ูุงููุณู.</p>

      <div class="dashboard-filters">
        <div class="filter-group">
          <label>ุงููุฑุน</label>
          <select id="dashBranch" class="input">
            <option value="">ุฌููุน ุงููุฑูุน</option>
            <option>ุงููุฑูุฒ ุงูุฑุฆูุณู</option>
            <option>ูุฑุน ุงูุฑูุงุถ</option>
            <option>ูุฑุน ุงูุดุฑููุฉ</option>
            <option>ูุฑุน ุงูุบุฑุจูุฉ</option>
            <option>ูุฑุน ุงูุฌููุจ</option>
          </select>
        </div>
        <div class="filter-group">
          <label>ุงูุฅุฏุงุฑุฉ</label>
          <select id="dashDept" class="input">
            <option value="">ุฌููุน ุงูุฅุฏุงุฑุงุช</option>
            <option>ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ</option>
            <option>ุฅุฏุงุฑุฉ ุงูุฌูุฏุฉ</option>
            <option>ุฅุฏุงุฑุฉ ุงูุชุดุบูู</option>
            <option>ุฅุฏุงุฑุฉ ุงูุตูุงูุฉ</option>
            <option>ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ</option>
            <option>ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</option>
          </select>
        </div>
        <div class="filter-group">
          <label>ุงููุณู</label>
          <select id="dashSection" class="input">
            <option value="">ุฌููุน ุงูุฃูุณุงู</option>
            <option>ูุณู 1</option>
            <option>ูุณู 2</option>
            <option>ูุณู 3</option>
            <option>ูุณู ุงูุณูุงูุฉ</option>
            <option>ูุณู ุงูุทูุงุฑุฆ</option>
            <option>ูุณู ุงูุฏุนู ุงูููู</option>
          </select>
        </div>
        <div>
          <button id="dashRefresh" class="btn btn-secondary btn-small">ุชุญุฏูุซ ุงููุคุดุฑุงุช</button>
        </div>
      </div>

      <div class="kpi-grid" id="kpiReports">
        <!-- KPIs for reports injected by JS -->
      </div>

      <div class="kpi-grid" id="kpiRisks" style="margin-top:12px;">
        <!-- KPIs for risks injected by JS -->
      </div>

      <div class="kpi-grid" id="kpiForms" style="margin-top:12px;">
        <!-- KPIs for forms injected by JS -->
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐</span> ุงูุฑุณูู ูุงููุคุดุฑุงุช ุงูุชูุตูููุฉ</h2>
      <p class="hint">ูุชู ุงุญุชุณุงุจ ูุฐู ุงููุคุดุฑุงุช ูุจุงุดุฑุฉ ูู ุจูุงูุงุช ุงููุธุงู ุงููุฎุฒูุฉ ูู ุงููุชุตูุญ.</p>

      <div class="chart-row">
        <div class="chart-card">
          <div class="chart-title">ุชูุฒูุน ุงูุจูุงุบุงุช ุญุณุจ ุงูููุน</div>
          <div class="chart-sub">ุณุฑู / ุนุงุฌู / ุนุงุฏู</div>
          <div id="chartReportsLevel" class="bar-list"></div>
        </div>
        <div class="chart-card">
          <div class="chart-title">ุชูุฒูุน ุงูุจูุงุบุงุช ุญุณุจ ุงูุญุงูุฉ</div>
          <div class="chart-sub">ูุฑุงุญู ุณูุฑ ุงูุจูุงุบ ูู ุงูุฅุฑุณุงู ุญุชู ุงูุฅุบูุงู</div>
          <div id="chartReportsStatus" class="bar-list"></div>
        </div>
        <div class="chart-card">
          <div class="chart-title">ุชูุฒูุน ุงููุฎุงุทุฑ ุญุณุจ ุดุฏุฉ ุงูุชูููู</div>
          <div class="chart-sub">ููุฎูุถุฉ / ูุชูุณุทุฉ / ุนุงููุฉ (ุญุณุจ ุญุงุตู ุงูุดุฏุฉ ร ุงูุงุญุชูุงููุฉ)</div>
          <div id="chartRisksRating" class="bar-list"></div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐</span> ุฃุญุฏุซ ุงูุฃูุดุทุฉ</h2>
      <p class="hint">ุชุฌูุน ูุฐู ุงููุงุฆูุฉ ุขุฎุฑ ุงูุชุบููุฑุงุช ูู ุงูุจูุงุบุงุช ูุงููุฎุงุทุฑ ูุงูููุงุฐุฌ ุงูุฑูููุฉ (ุขุฎุฑ 20 ุนูุตุฑูุง ุชูุฑูุจูุง).</p>
      <div id="activityList" class="activity-list"></div>
    </section>

  </main>
</div>

<script src="{% static 'assets/js/reports.js' %}"></script>
<script src="{% static 'assets/js/risk.js' %}"></script>
<script src="{% static 'assets/js/forms.js' %}"></script>
<script src="{% static 'assets/js/dashboard.js' %}"></script>
<script src="{% static 'assets/js/system.js' %}"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const user = ohsmsGetCurrentUser();

    // ุฅุฐุง ูุง ููู ูุณุชุฎุฏู
    if(!user){
        alert("ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู");
location.href = "/login/";

        return;
    }

    // ุงูุชุญูู ูู ุตูุงุญูุฉ ููุญุฉ ุงูุชุญูู
    if(!ohsmsHasPermission("view_dashboard")){
        alert("ุบูุฑ ูุตุฑุญ ูู ุจุงูุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู");
location.href = "/";

        return;
    }

});
</script>

</body>
</html>
